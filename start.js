(()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{(()=>{function e(e,n,i){const o=document.querySelector(e),d=document.querySelector(n),r=document.querySelector(i);function c(e){t(e,`${n} div div div form input[name="user_name"]`,`${n} div div div form input[name="user_phone"]`,`${n} div div div form p`)}o.addEventListener("click",(e=>{e.target&&e.preventDefault();const t=document.querySelector(`${n} div div div form button`);t&&t.addEventListener("click",(e=>{c(e)})),document.body.style.overflow="hidden",d.style.display="block"})),r.addEventListener("click",(e=>{e.target&&e.preventDefault(),document.body.style.overflow="",d.style.display="none";const t=document.querySelector(`${n} div div div form button`);t&&t.removeEventListener("click",(e=>{c(e)}))})),d.addEventListener("click",(e=>{if(e.preventDefault(),e.target===d){document.body.style.overflow="",d.style.display="none";const e=document.querySelector(`${n} div div div form button`);e&&e.removeEventListener("click",(e=>{c(e)}))}}))}async function t(e,t,n,i){e.preventDefault();const o=document.querySelector(t).value,d=document.querySelector(n).value,r=document.querySelector(i);if(o&&d)try{(await fetch("https://irvas-back-4g64.vercel.app/api/zamer/go",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,phone:d})})).ok?(r.insertAdjacentHTML("beforeend","<p>Успешно! Ждите звонка.</p>"),console.log("Успех!")):r.innerHTML="<p>Осечка! Попробуйте ещё раз.</p>"}catch(e){r.insertAdjacentHTML("beforebegin","<p>Осечка! Попробуйте ещё раз.</p>"),console.log("Ошибка при отправке данных",e)}}e(".header_btn_wrap",".popup_engineer",".popup_engineer .popup_close"),e(".contact_us_wrap .phone_link",".popup",".popup .popup_close"),function(e,n){const i=document.querySelector(e);setTimeout((()=>{document.body.style.overflow="hidden",i.style.display="block",document.querySelector(`${e} div div div form button`).addEventListener("click",(n=>{!function(n){t(n,`${e} div div div form input[name="user_name"]`,`${e} div div div form input[name="user_phone"]`,`${e} div div div form p`)}(n)}))}),6e4)}(".popup");const n=document.querySelector(".glazing .container").children;for(let t=2;t<n.length;t++)e(`.${n[t].classList[0]} div:nth-child(1) > div.glazing_price > button`,".popup_calc",".popup_calc div div button.popup_calc_close"),4!=t&&e(`.${n[t].classList[0]} div:nth-child(2) div.glazing_price button`,".popup_calc",".popup_calc div div button.popup_calc_close");document.querySelector("main div div div form button").addEventListener("click",(e=>{t(e,'main div div div form input[name="user_name"]','main div div div form input[name="user_phone"]',"main div div div form p")}));for(let e of document.querySelector(".decoration_content .row").children)document.querySelector(`.${e.classList} div form button`).addEventListener("click",(n=>{t(n,`.${e.classList} div form input[name="user_name"]`,`.${e.classList} div form input[name="user_phone"]`,"main div div div form p")}));document.querySelector(".sale div div div form button").addEventListener("click",(e=>{t(e,'.sale div div div form input[name="user_name"]','.sale div div div form input[name="user_phone"]',"main div div div form p")})),document.querySelector(".popup_calc_end div div div form button").addEventListener("click",(e=>{t(e,'.popup_calc_end div div div form input[name="user_name"]','.popup_calc_end div div div form input[name="user_phone"]',"main div div div form p")}))})(),(()=>{function e(e,t,n=0){const i=document.querySelectorAll(e);i.forEach((e=>{e.addEventListener("click",(o=>{i.forEach((e=>{e.firstElementChild.classList.remove("after_click")})),e.firstElementChild.classList.add("after_click"),function(e,t,n){const i=document.querySelector(e);for(let e of i.children)e.style.display="none";if(n)for(let e=0;e<n;e++)Array.from(i.children)[e].style.display="block";Array.from(i.children)[t+n].style.display="block"}(t,Array.from(i).indexOf(e),n)}))}))}e(".decoration_item",".decoration_content .row"),e(".glazing_block",".glazing .container",2)})()}))})();